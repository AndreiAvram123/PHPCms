<?php
include "Views/pageElements/Header.phtml";
?>

<div class="row" xmlns="http://www.w3.org/1999/html">
    <div class="col">
        <h1 class="page-title text-center mb-3">Here are some recent posts</h1>
        <?php
        foreach ($view->posts as $post) {
            $view->post = $post;
            include "PostCard.phtml";
        }
        ?>
    </div>
    <?php
    if (isset($view->friends)) {
        ?>
        <script src="Javascript/MessageManager.js"></script>
        <div class="col-1">

            <?php
            foreach ($view->friends as $friend) {
                ?>
                <div>
                    <a href="#"
                       onclick="startChat('<?php echo $_SESSION['user_id']?>',
                               '<?php echo $friend->getUserId() ?>','<?php echo $friend->getUsername()?>')"><?php echo $friend->getUsername() ?></a>
                </div>
                <?php
            }
            ?>
        </div>
        <?php
    }
    ?>
</div>


<?php
//only show the add post button if the user is logged in
if ($view->isUserLoggedIn) {
    ?>
    <a href="AddPost.php">
        <div class="float"><i class="fa fa-plus add-button"></i></div>
    </a>
    <?php
}
?>
<form method="get" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <div class="row mt-4 ">
        <div class="col text-center">
            <input type="hidden" name="currentPageId" value="<?php echo md5($view->currentPage) ?>">
            <!--Make sure that the previous button is disabled if we are on the first page-->
            <button type="submit" name="previousPage"
                    class="btn btn-primary" <?php if ($view->currentPage == 1) echo 'disabled' ?>>Previous page
            </button>
            <!--Make sure that the next button is disabled if we are on the last page-->
            <button type="submit" name="nextPage"
                    class="btn btn-primary" <?php if ($view->currentPage == $view->numberOfPages) echo 'disabled' ?> >
                Next page
            </button>
        </div>
    </div>
</form>
</div>
</body>
</html>


